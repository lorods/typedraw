name: 64-linux-host
run-name: Linux x64 binary build
on: [push]
permissions:
    contents: write
    issues: write
    pull-requests: write
jobs:
    config-meson:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v5
            - uses: actions/setup-python@v6
            - uses: BSFishy/meson-build@v1.0.3
              with:
                action: build
                directory: gh-build
                options: -w phonycycle=warn
                meson-version: 1.9.1
            - run: echo "VER=$(meson introspect meson.build --projectinfo | jq -r '.version')" >> $GITHUB_ENV
            - run: gh release create $VER ./gh-build/typedraw --notes "Arch - Linux 64-bit. Created by GitHub Actions."
              env:
                GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
            - uses: stefanzweifel/git-auto-commit-action@v6
              with:
                commit_message: Automated remote build
                file_pattern: './gh-build/\*typedraw'
